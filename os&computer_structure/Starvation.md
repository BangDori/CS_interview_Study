# 기아(Starvation)를 어떻게 해결할 수 있을까요?

- 자료조사
    
    ## 기아(Starvation)이란?
    
    특정 프로세스의 우선 순위가 낮아서 원하는 자원을 계속 할당받지 못하는 상태이다.
    
    10개의 작업이 대기하고 있다고 가정해보자.
    
    9개의 작업은 우선 순위가 1이고, 1개의 작업은 우선 순위가 2이다.
    
    만일 CPU가 작업을 처리하는 도중에 지속적으로 우선 순위가 1인 작업이 추가된다면?
    
    우선 순위가 2인 작업은 영원히 처리되지 못할 것이다.
    
    ## 기아(Starvation)가 발생하는 스케줄링
    
    SJF(Shortest Job First) 스케줄링: CPU 사용이 짧은 작업을 우선적으로 처리한다. 사용 시간이 긴 작업은 CPU를 할당 받기 힘들다.
    
    SRT(Shortest Remaining Time) 스케줄링: 남아있는 CPU 사용이 짧은 작업을 우선적으로 처리한다. 남아있는 시간이 긴 작업은 CPU를 할당 받기 힘들다.
    
    다단계 큐(MLQ, MultiLevel Queue) 스케줄링: 우선 순위가 높은 큐에 있는 작업들을 우선적으로 처리한다. 우선 순위가 낮은 큐에 있는 작업은 CPU를 할당 받기 힘들다.
    
    우선순위 스케줄링: 우선 순위가 높은 작업을 우선적으로 처리한다. 우선 순위가 낮은 작업은 CPU를 할당 받기 힘들다.
    
    ## 기아(Starvation)을 해결하기 위한 방법 - Aging
    
    시스템에서 특정 프로세스의 우선 순위가 낮아서 무한히 기다리는 경우를 방지한다.
    
    일정 시간 동안 작업이 처리되지 못하였다면 우선 순위를 한 단계씩 높여준다.
    
    - SJF 스케줄링에서 기아(Starvation)을 막기 위해 Aging 기법을 도입한 HRN(HRRN) 스케줄링 사용
        
        
        ```
        HRM의 우선 순위 선정 방법
        우선순위 = 시스템 응답시간 = (대기시간 + 실행시간) / 실행시간
        ```
        
        HRN 스케줄링은 SJF 스케줄링에서 긴 작업과 짧은 작업 사이의 불평등을 보완하기 위한 방법으로, 대기 시간이 긴 프로세스일 경우 우선 순위가 높아진다.
        
    
    - 다단계 큐 스케줄링에서 기아(Starvation)을 막기 위해 Aging 기법을 도입한 MLFQ 스케줄링 사용
        
        
        - 다단계 큐(MLQ, MultiLevel Queue) 스케줄링
        
        <img width="549" alt="MLQ_Scheduling" src="https://user-images.githubusercontent.com/99192837/231201785-3589688b-1fb4-404e-8f90-d11273d5ced9.png">
        
        우선 순위마다 Ready Queue가 형성되어 있다.
        
        항상 가장 높은 우선 순위 큐의 프로세스에 CPU를 할당한다.
        
        우선순위가 낮은 큐에서 작업이 실행중이었더라도 상위 단계의 큐에 프로세스가 도착하면 CPU를 빼앗긴다.
        
        - 다단계 피드백 큐(MLFQ, MultiLevel Feedback Queue) 스케줄링
            
        <img width="502" alt="MLFQ_Scheduling" src="https://user-images.githubusercontent.com/99192837/231201829-b5fe857f-7363-4050-a7ff-a30257625429.png">
 
        
        처음에는 가장 높은 우선 순위 Ready Queue에 들어가 뒤, FCFS(First Come First Out) 스케줄링으로 작업들이 처리된다. 각 단계마다 최대 CPU 시간 할당량이 존재한다.
        
        해당 큐의 CPU 시간 할당량이 끝나면 한 단계 아래 Ready Queue에 들어간다. 단계가 내려갈수록 시간 할당량이 증가한다.
        
        가장 낮은 우선 순위 Ready Queue에 들어간 뒤, FCFS 스케줄링으로 작업들이 처리된다. 만일 해당 큐에서조차 너무 오래 대기한다면 다시 상위 큐로 이동한다.
        
        - 다단계 큐 스케쥴링 vs 다단계 피드백 큐 스케줄링
        
        다단계 큐 스케줄링은 큐와 큐 사이에 프로세스들이 이동할  수 없는 방면, 다단계 피드백 큐 스케줄링은 큐와 큐 사이에 프로세스들이 이동할 수 있다.
        
    
    Q. 왜 SRT 스케줄링에서 기아(Starvation)을 막기 위한 스케줄링은 없을까요?
    
    A. 극단적인 상황을 제외하고, 대부분의 경우에 SRT 스케줄링에서 기아(Starvation) 현상이 잘 나타나지 않는다고 한다.
    
- 추가질문
    
    Q. 다단계 피드백 큐 스케쥴링에서 가장 낮은 우선순위인 Ready Queue에서 FCFS 스케쥴링으로 작업이 처리되고 해당 큐에서 조차 처리되지 못하는 작업들은 우선순위가 높은 큐로 올려준다는 점에서 의문이 생깁니다. FSFC 스케쥴링은 대기 큐에 들어온 순서대로 처리하는 스케쥴링인데 어떻게 처리되지 못하고 남아있는건가요?
    
    A. 작업의 처리 우선순위는 위 예시에서 Quantum이 8인 큐입니다. 앞선 큐에서 처리되지 못하여 마지막 큐로 밀려났더라면, 앞선 큐에 있는 모든 작업들이 처리되고 나서야 마지막 큐에 있는 작업들이 처리될 수 있습니다. 만일 우선 순위가 높은 큐에 작업중인 프로세스가 많다면 마지막 큐에 있는 작업들은 FCFS 큐에 있더라도 처리되지 못하고 남아있게 됩니다.
    
- 답안
    
    운영체제에서 기아란 우선 순위가 낮은 프로세스가 자원을 할당받지 못하는 현상입니다. 기아 프로세스는 우선 순위를 한 단계 높혀 처리하는 Aging 기법을 사용하여 해결할 수 있습니다. SJF 스케줄링에서 Aging 기법을 도입한 HRN(HRRN) 스케줄링과 MLQ 스케줄링에서 Aging 기법을 도입한 MLFQ 알고리즘이 대표적인 예입니다.
    
- Reference
    
    [Starvation (기아 상태) 란?](https://velog.io/@woga1999/Starvation-기아-상태-란)
    
    [#3 - 2) 스케줄링 기법 및 종류와 Aging(에이징) 기법](https://yabmoons.tistory.com/655)
    
    [[운영체제 OS] 다단계 큐 스케줄링(MLQ), 다단계 피드백 큐 스케줄링(MFQ)](https://cocoon1787.tistory.com/124)
